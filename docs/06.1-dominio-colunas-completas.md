# 06.1 - Domínio de Colunas (Modelo Técnico Consolidado)

Aqui está o descritivo técnico das colunas do dataset, consolidado a partir das definições oficiais do DATASUS e do schema canônico do pipeline (`data/processed`).

## 1. Colunas Padrão Comuns (Core)

Estas colunas identificam tempo, origem, categorização clínica básica e georreferência de residência.

| Coluna | Descrição |
|---|---|
| `ano_cmpt` / `mes_cmpt` | Ano e mês de competência do dado processado. |
| `sistema` | Origem do dado: `SIA` (Ambulatorial) ou `SIH` (Hospitalar). |
| `uf_origem` | Unidade da Federação de origem do registro. |
| `main_icd` | Código da doença principal (CID-10) padronizado pelo pipeline. |
| `icd_group` | Agrupamento descritivo da patologia (ex.: `Diabetes`, `Vascular`, `Trauma`, `Outro`). |
| `opm_flag` / `fisio_flag` | Indicadores booleanos para OPM e fisioterapia. |
| `mun_res_status`, `mun_res_tipo`, `mun_res_nome`, `mun_res_uf`, `mun_res_lat`, `mun_res_lon`, `mun_res_alt`, `mun_res_area` | Dados geográficos do município de residência. |

## 2. Colunas Específicas: SIA (Ambulatorial)

Focadas em produção ambulatorial, profissional, procedimento SIGTAP e faturamento.

| Coluna | Descrição |
|---|---|
| `pa_cmp` / `pa_mvm` | Competência (AAAAMM) e mês de movimento/processamento. |
| `pa_idade` / `idademin` / `idademax` | Idade do paciente e faixas permitidas para o procedimento. |
| `pa_sexo` / `pa_racacor` / `pa_etnia` | Sexo, raça/cor e etnia do paciente. |
| `pa_coduni` / `pa_cnpjcpf` / `pa_cnpjmnt` | CNES da unidade e identificação do prestador/mantenedora. |
| `pa_cbocod` | Código CBO do profissional executante. |
| `pa_proc_id` / `nome_proced` | Código SIGTAP e nome do procedimento. |
| `pa_cidpri` / `pa_cidsec` / `pa_cidcas` | CID principal, secundário e associado. |
| `pa_qtdpro` / `pa_qtdapr` | Quantidade produzida vs. aprovada. |
| `pa_valpro` / `pa_valapr` | Valor produzido vs. valor aprovado para pagamento. |
| `pa_tpfin` / `pa_subfin` / `pa_gestao` | Tipo/subtipo de financiamento e gestão. |
| `pa_docorig` / `pa_autoriz` / `pa_catend` / `pa_motsai` / `pa_indica` | Colunas administrativas e de faturamento (BPA/APAC). |

## 3. Colunas Específicas: SIH (Hospitalar)

Focadas em internações (AIH), custos hospitalares e desfechos.

| Coluna | Descrição |
|---|---|
| `n_aih` | Número da AIH (identificador da internação). |
| `cnes` / `cgc_hosp` / `cnpj_mant` | Identificação da unidade hospitalar e mantenedora. |
| `diag_princ` / `diag_secun` / `diagsec1` ... `diagsec9` | Diagnósticos principal e secundários da internação. |
| `dias_perm` / `qt_diarias` | Tempo de permanência e quantidade de diárias. |
| `val_tot` | Valor total da fatura hospitalar. |
| `val_sh` / `val_sp` | Serviços hospitalares vs. serviços profissionais. |
| `val_uti` / `val_uci` | Custos com UTI e unidade intermediária. |
| `dt_inter` / `dt_saida` | Data de internação e data de saída. |
| `morte` | Indicador de óbito durante a internação. |
| `proc_rea` / `proc_solic` | Procedimento realizado e solicitado. |
| `cobranca` / `gestao` / `financ` / `faec_tp` / `aud_just` / `sis_just` / `sequencia` | Campos administrativos/auditoria e financiamento. |

## 4. Colunas Derivadas (Pipeline)

Criadas no `transform.py` para padronização analítica.

| Coluna | Descrição |
|---|---|
| `custo_total` | Unifica valor financeiro principal (`pa_valapr` no SIA ou `val_tot` no SIH, conforme disponibilidade). |
| `idade_grupo` | Categorização etária (`0-17`, `18-59`, `60+`). |
| `cid_capitulo` | Letra/capítulo inicial do CID-10. |
| `ano_mes` | Competência no formato `YYYYMM` para séries temporais. |

## 5. Inventário Completo (Merge com Fonte de Verdade)

As seções **1 a 4** trazem a **visão executiva/funcional** do domínio.  
A seção **5** é a **referência exaustiva** (coluna a coluna) para validação técnica e implementação.

Abaixo está a listagem completa de colunas do schema canônico da fonte de verdade analítica (`data/processed`), derivada de `src/data/transform.py`.

### 5.1 Comuns (`16`)

| # | Coluna | Descrição |
|---:|---|---|
| 1 | `ano_cmpt` | Ano de competência. |
| 2 | `mes_cmpt` | Mês de competência. |
| 3 | `sistema` | Sistema de origem (`SIA` ou `SIH`). |
| 4 | `uf_origem` | UF de origem do registro. |
| 5 | `main_icd` | CID principal padronizado. |
| 6 | `icd_group` | Grupo clínico derivado do CID. |
| 7 | `opm_flag` | Indicador de OPM. |
| 8 | `fisio_flag` | Indicador de fisioterapia. |
| 9 | `mun_res_status` | Status do município de residência. |
| 10 | `mun_res_tipo` | Tipo do município de residência. |
| 11 | `mun_res_nome` | Nome do município de residência. |
| 12 | `mun_res_uf` | UF do município de residência. |
| 13 | `mun_res_lat` | Latitude do município de residência. |
| 14 | `mun_res_lon` | Longitude do município de residência. |
| 15 | `mun_res_alt` | Altitude do município de residência. |
| 16 | `mun_res_area` | Área do município de residência. |

### 5.2 SIA Específicas (`42`)

| # | Coluna | Descrição |
|---:|---|---|
| 1 | `pa_cmp` | Competência do registro ambulatorial. |
| 2 | `pa_mvm` | Mês/competência de movimento. |
| 3 | `pa_idade` | Idade do paciente. |
| 4 | `idademin` | Idade mínima permitida no procedimento. |
| 5 | `idademax` | Idade máxima permitida no procedimento. |
| 6 | `pa_sexo` | Sexo do paciente. |
| 7 | `pa_racacor` | Raça/cor do paciente. |
| 8 | `pa_etnia` | Etnia do paciente. |
| 9 | `pa_ufmun` | Código UF/município do atendimento. |
| 10 | `pa_munpcn` | Município de residência do paciente. |
| 11 | `pa_ufdif` | Indicador/código de diferença de UF. |
| 12 | `pa_mndif` | Indicador/código de diferença de município. |
| 13 | `pa_coduni` | Código CNES da unidade. |
| 14 | `pa_cnpjcpf` | Documento do prestador (CNPJ/CPF). |
| 15 | `pa_cnpjmnt` | CNPJ da mantenedora. |
| 16 | `pa_nat_jur` | Natureza jurídica do estabelecimento. |
| 17 | `pa_cnsmed` | CNS do profissional. |
| 18 | `pa_cbocod` | Código CBO do profissional. |
| 19 | `pa_proc_id` | Código do procedimento SIGTAP. |
| 20 | `nome_proced` | Nome do procedimento. |
| 21 | `pa_grupo` | Grupo SIGTAP do procedimento. |
| 22 | `pa_subgru` | Subgrupo SIGTAP do procedimento. |
| 23 | `pa_cidpri` | CID principal do atendimento. |
| 24 | `pa_cidsec` | CID secundário do atendimento. |
| 25 | `pa_cidcas` | CID associado/causa associada. |
| 26 | `pa_qtdpro` | Quantidade produzida. |
| 27 | `pa_qtdapr` | Quantidade aprovada. |
| 28 | `pa_valpro` | Valor produzido. |
| 29 | `pa_valapr` | Valor aprovado. |
| 30 | `pa_vl_cf` | Componente financeiro federal. |
| 31 | `pa_vl_cl` | Componente financeiro local. |
| 32 | `pa_vl_inc` | Valor de incentivos. |
| 33 | `nu_pa_tot` | Totalizador PA. |
| 34 | `nu_vpa_tot` | Totalizador financeiro VPA. |
| 35 | `pa_docorig` | Documento de origem do faturamento. |
| 36 | `pa_autoriz` | Número da autorização. |
| 37 | `pa_catend` | Caráter/categoria do atendimento. |
| 38 | `pa_motsai` | Motivo de saída/encerramento. |
| 39 | `pa_indica` | Indicador administrativo APAC/BPA. |
| 40 | `pa_tpfin` | Tipo de financiamento. |
| 41 | `pa_subfin` | Subtipo de financiamento. |
| 42 | `pa_gestao` | Código de gestão responsável. |

### 5.3 SIH Específicas (`55`)

| # | Coluna | Descrição |
|---:|---|---|
| 1 | `n_aih` | Número da AIH (identificador da internação). |
| 2 | `cnes` | Código CNES da unidade hospitalar. |
| 3 | `cgc_hosp` | Documento do hospital (CGC/CNPJ histórico). |
| 4 | `cnpj_mant` | CNPJ da mantenedora. |
| 5 | `munic_res` | Município de residência do paciente. |
| 6 | `munic_mov` | Município de processamento/movimento da AIH. |
| 7 | `uf_zi` | UF da zona de internação/atendimento. |
| 8 | `idade` | Idade do paciente. |
| 9 | `cod_idade` | Unidade/código da idade (anos, meses etc.). |
| 10 | `sexo` | Sexo do paciente. |
| 11 | `nasc` | Data de nascimento. |
| 12 | `raca_cor` | Raça/cor do paciente. |
| 13 | `etnia` | Etnia do paciente. |
| 14 | `cep` | CEP de residência. |
| 15 | `nacional` | Nacionalidade. |
| 16 | `diag_princ` | Diagnóstico principal da internação (CID). |
| 17 | `diag_secun` | Diagnóstico secundário principal. |
| 18 | `diagsec1` | Diagnóstico secundário 1. |
| 19 | `diagsec2` | Diagnóstico secundário 2. |
| 20 | `diagsec3` | Diagnóstico secundário 3. |
| 21 | `diagsec4` | Diagnóstico secundário 4. |
| 22 | `diagsec5` | Diagnóstico secundário 5. |
| 23 | `diagsec6` | Diagnóstico secundário 6. |
| 24 | `diagsec7` | Diagnóstico secundário 7. |
| 25 | `diagsec8` | Diagnóstico secundário 8. |
| 26 | `diagsec9` | Diagnóstico secundário 9. |
| 27 | `cid_morte` | CID da causa de morte (quando aplicável). |
| 28 | `cid_notif` | CID de notificação compulsória (quando aplicável). |
| 29 | `cid_asso` | CID associado. |
| 30 | `cid_princ` | CID principal no layout SIH. |
| 31 | `proc_rea` | Procedimento realizado. |
| 32 | `proc_solic` | Procedimento solicitado. |
| 33 | `uti_mes_to` | Total de diárias/uso de UTI (mês). |
| 34 | `uti_int_to` | Total de uso de UTI na internação. |
| 35 | `qt_diarias` | Quantidade de diárias. |
| 36 | `dias_perm` | Dias de permanência. |
| 37 | `val_tot` | Valor total da AIH/internação. |
| 38 | `val_sh` | Valor de serviços hospitalares. |
| 39 | `val_sp` | Valor de serviços profissionais. |
| 40 | `val_sadt` | Valor de SADT (apoio diagnóstico/terapêutico). |
| 41 | `val_ortp` | Valor de OPM. |
| 42 | `val_uti` | Valor de UTI. |
| 43 | `val_uci` | Valor de unidade de cuidados intermediários. |
| 44 | `val_sangue` | Valor de hemoterapia/sangue. |
| 45 | `val_acomp` | Valor de acompanhante. |
| 46 | `dt_inter` | Data de internação. |
| 47 | `dt_saida` | Data de saída. |
| 48 | `morte` | Indicador de óbito na internação. |
| 49 | `cobranca` | Tipo/motivo de cobrança/saída. |
| 50 | `gestao` | Código de gestão responsável. |
| 51 | `financ` | Modalidade de financiamento. |
| 52 | `faec_tp` | Tipo FAEC (quando aplicável). |
| 53 | `aud_just` | Justificativa de auditoria. |
| 54 | `sis_just` | Justificativa do sistema. |
| 55 | `sequencia` | Sequência do registro/remessa. |

### 5.4 Derivadas (`4`)

| # | Coluna | Descrição |
|---:|---|---|
| 1 | `custo_total` | Valor financeiro unificado para análise (SIA/SIH). |
| 2 | `idade_grupo` | Faixa etária derivada (`0-17`, `18-59`, `60+`). |
| 3 | `cid_capitulo` | Capítulo CID-10 derivado do diagnóstico principal. |
| 4 | `ano_mes` | Competência em formato `YYYYMM` para análise temporal. |

## Referências

- DATASUS TabNet SIA: https://tabnet.datasus.gov.br/cgi/sia/padescr.htm
- DATASUS TabNet SIH: https://tabnet.datasus.gov.br/cgi/sih/midescr.htm
- Schema canônico do pipeline: `src/data/transform.py`

> Para detalhes de códigos de preenchimento (ex.: `pa_tpfin`, `cobranca`, `aud_just`), consultar os manuais/layouts oficiais SIA/SIH no DATASUS.
>
> A IA pode cometer erros. Sempre valide regras de negócio e códigos oficiais antes de uso analítico ou assistencial.
